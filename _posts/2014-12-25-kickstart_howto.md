---
layout: post
title: "Как пользоваться Kickstart"
date: '2014-12-25 11:37:50'
---

Kickstart нужен чтобы автоматизировать установку RHEL-based систем на железо. По сути это программа установки ISO-образа. Её можно указывать параметрами в grub установщика, можно зашить эти параметры при пересборке ISO-образа.

## Пишем конфиг

Писать конфиг можно с помощью kickstart configurator (`apt install system-config-kickstart`).

Вот то, что получилось у меня, в качестве примера.

``` shell
#Generated by Kickstart Configurator
#platform=x86_64

#System language
lang ru_RU
keyboard us

# System timezone
timezone Europe/Moscow
# Root password
rootpw --iscrypted $1$w3JEJOMG$IUpdsYLUAd48SJ2F4zVXt1
# Reboot after installation
reboot
# Use text mode install
text
# Install OS instead of upgrade
install

# System bootloader configuration
bootloader --location=mbr --append panic=10 selinux=0 rd_NO_LVM rd_NO_DM
# Clear the Master Boot Record
zerombr yes

# Partition clearing information
clearpart --all --initlabel

# Disk partitioning information
part / --fstype ext4 --size 4000 --asprimary
part /app --fstype ext4 --size 8000
part /mnt/log/ --fstype ext4 --size 700
part /mnt/etc/ --fstype ext4 --size 700
part /mnt/bk/ --fstype ext4 --size 500
part /mnt/var/ --fstype ext4 --size 100
part swap --recommended

# System authorization infomation
auth  --useshadow  --enablemd5
# Firewall configuration
firewall --disabled --ssh
# Do not configure the X Window System
skipx
```

## Как загрузиться с опубликованного kickstart-конфига

Дописать пару опций в параметры загрузки, например:

```
ks=http://example.com/ks.cfg ksdevice=eth0 ip=10.20.140.38 netmask=255.255.0.0 gateway=10.20.1.1 dns=10.20.1.1
```

После установки настройки сети сохраняются и после завершения установки можно подключиться к машине по ssh.
