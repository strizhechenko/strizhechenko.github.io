---
title: Прочитал релизные заметки RHEL7.0...RHEL7.3
---

Спасибо @ipronix теперь у меня есть еще одна очередь чтива:

![RHEL7](/share/rhelbooks.jpeg)

Правда не знаю как я теперь srebook добью.

## Изменения в десктопной части

Что несколько смущает - число изменений в десктопной части. Неужели RHEL часто юзают в качестве десктопа? КТО?!

### pidgin & empathy

> A new IM client, pidgin, has been introduced, which supports off-the-record (OTR) messaging and the Microsoft Lync IM application.

1. Чо за Microsoft Lync?
2. Какой вообще год, чтобы читать про pidgin в Linux дистрах?

## NetworkManager и вообще вся сетевая подсистема

Вот там ещё про nmcli упомянули и стало интересно - а как много людей вообще юзаю NetworkManager.

Судя по опросу в твиттере 40/40 (остальные 20 процентов поровну поделены между "у меня Windows" и "Слава Украине!").

У меня из-за NetworkManager стабильно возникали проблемы с виртуализацией, так что я использую статичные конфиги бриджей, а его выпиливаю. Однако некоторые вещи о которых пишут - радуют (ее, я умею радоваться за 40% людей использующих то, что я не использую!).

### bridges and bonds

Бриджи и бонды теперь вроде в гуе почти что можно настраивать.

### Обнаружение дублирующихся адресов в сети

> NetworkManager now detects duplicate IPv4 addresses”

Да он это вроде с 6.2 версии еще делать умеет

### Хотелочки

Так никто и не сделал для редхата утилиту в духе: 

```
system-config-network-dump ~/network-scripts/
```

чтобы сохранять все ручные настройки.

ifconfig/vconfig уже выкинули, route выкинули, networkmanager нагородили, nmcli стандартизировали, а такую фигню сделать не могут)

Нашел упоминание nfct. Интересно, это просто замена conntrack-tools или бессмысленное дублирование sysctl?

### firewalld

> Upgraded firewalld ... and ipset support.

Бля, как они вообще файрволы без поддержки ipset строить собирались?

### lockless xmit

Узнаю такие вещи, что прямо ебать-ебать-ебать.

Всем извращенцам, строящим линуксовые роутеры стоит пощупать RHEL7.3 на предмет производительности. Думаю, это актуально тем, кто VPN'ит абонентов и шейпит на одном сервере. Прирост производительности предсказать не могу, но это огонь ваще.

![RHEL lockless xmit](/share/rhellocklessxmit.jpg)

## Забавности

### Звучит как ПИНГВИНОКАПЕЦ и приход Hurd

Еще забавно переименование kernel-firmware в linux-firmware.

### Пишущие машинки в 2017

Anaconda предоставляет текстовый режим для IBM S/390 и терминалов электронных пишущих машинок, способный работать в режиме записи без чтения.

What. Year. Is. it.

### Qcow2 v3

> Qcow2 версии 3

Не, ну смешно же звучит?)

## Kernel

Выпилили pppol2tp. Оно теперь builtin шоле?

### virtio_net умеет в multiqueue

В virtio_net вроде наконец-то multiple queue завезли. Если оно будет из коробки делать правильное affinity - это будет круто. Конечно это не даст радикального уменьшения latency, но на throughput повлияет более чем хорошо.

Однако думаю стоит напомнить: сеть в виртуалках - говна кусок и вы ничего с этим не сделаете (ну ок, побрызгать освежителем воздуха можете).

### LRO в ixgbe выключен по умолчанию

Ну наконец-то! (вообще хочу поведение при котором LRO включен по умолчанию и вырубается при первом же FORWARD-пакете), но мб небезопасно.

![rhel ixgbe without lro](/share/rhelixgbelro.jpg)

### zerocopy

Не помню точно, но как-то там это упомянули. В итоге теперь хочу бенчмаркать RHEL6 + QEMU/KVM vs RHEL7 QEMU/KVM, потому что zero copy в сетке из коробки звучит ну оочень вкусно, а стендов с RHEL7 нет(

## Разное

### Firstboot

Firstboot у них еще есть теперь. В нашей платформе тоже есть что-то такое и это блядь ебаный пиздец, если честно, как по мне.

### GPT

Пишут, что grub2 wow-wow-wow, поддерживает GPT. Хз как, но у нас в CentOS 6 тоже GPT юзался

### Systemd

Когда-нибудь я сяду за книжку по systemd и больше никогда не буду online.

### HAProxy

Чувствую себя кошкой во время течки, когда читаю про HAProxy Вроде никогда не пробовал, но хочется пощупать (практической необходимости нет)

## Интересности

Хммм. А #zswap вообще имеет смысл, если не находишься в постоянном свопе гигов эдак на 10?

Оказывается anaconda умеет делать --autoscreenshot, то есть делать скриншоты шагов установки. Писать доки наверное дичайше удобно теперь.

Узнал про 3 версии архитектуры Intel Core i{3,5,7} чисто из доков редхата. Интересно, когда я соберусь покупать себе новый процессор, сколько ещё архитектур выйдет? :)

## Контейнеры и kickstart

О, kickstart теперь нормально дружит с загрузкой скриптов по https, еее.

Написано, что улучшена поддержка контейнеров в #kickstart. Но разве он вообще нужен контейнерам? Там же всегда сборка из копии чрута-шаблона?

### Гонево про Docker

Red Hat пишет о том, что траблшутинг в Docker проще и быстрее. Это ведь маркетинговый бред, или я что-то упустил, когда щупал докер?

### Устаревший LXC?!

> Containers with the LXC Format Have Been Deprecated
> Red Hat отдел пользовательской документации.
> Примечания к выпуску 7.1.

Wow

## Всякое новое

### Freeradius 3

В RHEL7 еще freeradius 3 с нормальным radsec вышел. Интересно, как скоро это в наш биллинг притащат (и нужна ли безопасность провайдерам)?

### TFA в SSH

Двухфакторная аутентификация в ssh (публичный ключ + пароль) из коробки - это заебись!

### Человеческое отображение прогресса у dd и чуть более шустрый curl

![rhel, dd, curl](/share/rhelddcurl.jpg)

### CRIU

Опа, дело "безумных русских" живет!

![rhel criu](/share/rhelcriu.jpg)

### Оказывается есть ...

Оказывается есть arptables, про который я ничего не знаю, а он уже практически устаревший.

Прочитал про MACSec и аж охренел от того что и такое существует.

### nested KVM

Еще пишут что появился nested KVM. Я думал это существует уже лет пять минимум (в голову не приходило потестить).

## Python

### Python-netifaces

> New package: python-netifaces

Хм, юзаю его с CentOS 6.5 чтоле, а пишут что появился с 7.3. Странно

### Всякие там оптимизации

Не хочу читать подробности про это, хочу бенчмаркать свои частные случаи говнокода!

![rhel python optimizations](/share/rhelpython.jpg)

## I/O

### BLK-MQ

Еее, сырые (но крутые) штуки тем, у кого ААА МЕДЛЕННО ДИСКИ ПИШУТ ЧО ДЕЛАТЬ.

![rhel block multiqueue](/share/rhelblkmq.jpeg)

Не всё ведь с помощью flashcache на ssd это затыкать, и swapiness по-идиотски менять, не понимая причин значений по умолчанию.

### R A I D F L U I D

> LVM2 support for RAID-level takeover, the ability to switch between RAID types, is now available as a Technology Previe

## Баги

Еее, RHEL7.1, продакшн!
@
RHEL7.2

![rhel bug 1](/share/rhelbug1.jpg)

Лол

![rhel bug 2](/share/rhelbug2.jpg)

Меня и без виртуализации в grub 1.9x в CentOS 6 этот баг заебывает https://t.co/F2Itg69VMa

## Мысли

### Про книжки

Чем больше читаю книжки с документации Red Hat тем ниже падает моя оценка собственных знаний современных Linux-систем по шкале от 0 до 100.

Когда я начал было что-то вроде 45/100.  Сейчас - около 23/100.

Человеков, знакомых с Linux больше чем на 55 я пока не встречал. Это надо ему вообще всю жизнь посвятить, влезть в каждый угол с практикой.

### memtest86

Интересно, как долго длится memtest86 для 2Tb RAM?

### iputils

Объединили ping и ping6 в одну утилиту. И это круто.

Кстати, джва года хочу фичу, которую мне самому впадлу сделать: 

```
ping http://example.com/bla/bla.bla
```

который вырезает из URL хост, чтобы легко делать CTRL+C/CTRL+V.

## Selinux 

Читаю книжку по selinux и просто истекаю радугой изо рта, замечая отсылки к другим технологиям, о которых не знал или считал очень сырыми.

Это реально очень круто, что в наше время есть столько всего готового и работающего, ааа!!

Узнал, что SELinux придумала АНБ и он каким-то образом поддерживается в Postgres 9.2


Ща как стану экспертом по selinux, а потом все равно его выключат, потому что "тормозит скорость разработки, мешает и не нужен ибо неудобно"
## Вообще не про редхат

Узнал, что в dot можно несколько раз на одну строчку рисовать стрелочку.  Ну типа не: 

``` dot
x -> y
y -> z
```

а

``` dot
x -> y -> z
```

Мелочь, а прикольно. Ещё бы сахарку для короткой записи нескольких веток, типа:

``` dot
x:
-> y;
-> z;
```

вместо:

``` dot
x -> y
x -> z
```

## Неразобранное

816429576628924421 Вот начитался всяких плюх с поддержкой нового железа, а в России его может даже и не появится никогда (не дай бог).
816431702990065664 Раньше мечтали смотреть антме в grub, скоро можно будет смотреть его с помощью нескольких сетевых карт одновременно. https://t.co/eScVVq4rUq
816578485951074304 Damn systemd! Need more incompatibles! https://t.co/8giJbOQTdV
816579709735763968 “The ip command can now display bridge configuration”  О, теперь еще и bridge-utils стал устаревшим выходит?
816580245960720384 В curl добавляют поддержку unix-сокетов для того, чтобы было легче мониторить REST-API Docker'а.  Я не совсем понимаю как и зачем всё это.
816665485538365440 Лол, в firewalld запилили поддержку указания зон в ifcfg-файлах. Я это запилил и выпилил как костыль пару лет назад :D
816668334922072064 RHEL - выбор серьезных людей, которые ценят свое время, чтобы тратить его на то, что работало и было сломано какими… https://t.co/lfTdHNu2Bo
816759148125765641 Еее, Windows! https://t.co/UQkx6u9ycv

816883839058452480 Вот читаю про tuned, хочу даже сделать под свой продукт профиль для него и заюзать (ну, типа постандартнее все будет), но боюсь что он тупой
817095252267958272 Еее, прочитал все release notes RHEL 7.{0..3}, следующая цель - книжонка по Selinux на 230 страниц.
