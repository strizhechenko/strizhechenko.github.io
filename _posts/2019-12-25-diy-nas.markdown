---
title: Домашний NAS
---

Захотелось мне сделать себе многофункциональное устройство для хранения информации, программное обеспечение которого будет в достаточной степени контролироваться мной, дабы избежать преждевременного устаревания.

## Задачи и цели

- Надёжность хранения, отказоустойчивость
- Хранить музыку
- Хранить фото
- Служить Apple Time Capsule для хранения резервных копий двух ноутбуков
- Хранить побайтовые копии двух компьютеров с Windows
- Хранить резервные копии телефонов и планшетов
- Быть компактным
- Быть тихим
- Не есть много электричества

### Бонус-уровень

- Заменить Wi-Fi роутер, либо дополнить его 5GHz частотой
- Крутить в виртуальной машине Android TV
- Иметь возможность запускать виртуальную машину с Windows (на основе той же самой побайтовой резервной копии)

## Реализация

Я не очень хорошо разбираюсь в компьютерном железе, его размерах, совместимости, разъёмах итд, поэтому не стал брать корпус с салазками, подбирать под него материнскую плату, итд. Пожалел!

Изначально заглядывался на Intel NUC, идея Mini PC вообще привлекала, практически тот же самый Raspberry PI, только стандартный x86_64, никаких дополнительных заморочек. Но у него есть ограничение - всего один жёсткий диск. А поскольку среди целей есть **отказоустойчивость** - хранить данные хочется на RAID 1, а для этого нужны минимум два диска.

На одном из форумов увидел как кто-то ссылался на ASRock Deskmini 310, как на платформу как раз с 2 SATA III интерфейсами. В итоге выбор упал на него.

| Часть | Модель | Цена (руб) | Почему |
| :---- | :---- | ----: | :---- |
| Корпус | ASRock Deskmini 310 | 7999 | Взял по акции. Вероятно стоило взять вариант с AMD (A300), у них есть более "холодные" процессоры, но на них акции не было, поэтому стоило оно на 4000р дороже. **Минус** — диски сзади материнской платы не продуваются. |
| Материнская плата | ASRock H310M | 0 | В комплекте с корпусом |
| Процессор | Intel Pentium Gold G5400 | 3799 | (Герцы * Ядра * Потоки) / Деньги. Для задач NAS - оверкилл, можно было взять что-то попроще-подешевле, но для дополнительных задач типа виртуальных машин хочется иметь какой-то запас производительности. Если не хватит - можно заменить на Core i3 8100k. |
| Кулер | DEEPCOOL Theta 9 | 350 | Нужен был кулер, менее 50мм высотой, у этого - 46.5. Минус - шумит. |
| Оперативная память | Patriot Viper 4 PV48G240C5S (4Gb) | 1750 | Пока - достаточно, есть второй слот, теоретически можно расширяться хоть до 32гб. |
| Диски под хранение | 2 x Toshiba L200 HDWL120EZSTA | 4890 | Сейчас, возможно бы подумал трижды и купил бы корпус с салазками под 3.5 жёсткие диски. А так - один из немногих дисков в формфакторе 2.5 дюйма, объёмом больше 1Tb за приемлемую цену. Пока посчитал что 2Tb мне хватит. |
| Диск под систему | 1 x Toshiba KBG30ZMS128GA | 2200 | Сперва думал, что установлю ОС на рейд, потом решил, что с этим будут заморочки и решил завести отдельный диск. Т.к. оставшийся слот был под M.2 диски и раз уж начал делать миниатюрно - решил взять самый маленький форм-фактор - 2230. Альтернативы не было. |
| Wi-Fi | Intel AC 9560NGW | 790 | Моя большая ошибка - Wi-Fi адаптеру нужна антенна (до этого никакого опыта работы с беспроводным оборудованием не было), а в комплекте её не было. Заказал что-то на алиэкспрессе в итоге, но ещё не опробовал. |
| OS | CentOS 8 | 0 | Для Time Capsule нужна была актуальная Samba, собирать из исходников не хотелось. Ну и просто посмотреть на веяния современности захотелось, не совсем же я дед ещё, на RHEL6 всё поднимать. |

Итого: 26668 рублей.
